<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Semantic Web Components - Basic Example</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #f5f5f5;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    
    h1 {
      color: #2196F3;
      margin-bottom: 10px;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 30px;
    }
    
    .section {
      margin-bottom: 40px;
    }
    
    .section h2 {
      color: #333;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    
    .btn {
      padding: 10px 20px;
      background: #2196F3;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.2s;
    }
    
    .btn:hover {
      background: #1976D2;
    }
    
    .btn-secondary {
      background: #757575;
    }
    
    .btn-secondary:hover {
      background: #616161;
    }
    
    .output {
      margin-top: 20px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 4px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    
    .demo-info {
      padding: 15px;
      background: #E3F2FD;
      border-left: 4px solid #2196F3;
      border-radius: 4px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Semantic Web Components</h1>
    <p class="subtitle">Framework-agnostic custom elements with Shadow DOM</p>
    
    <!-- Provider wraps all semantic components -->
    <semantic-provider debug="true" auto-discover="true">
      
      <!-- Form Section -->
      <section class="section">
        <h2>üìù Semantic Form Example</h2>
        
        <div class="demo-info">
          <strong>Features:</strong> Auto-validation, semantic registration, field discovery
        </div>
        
        <form id="demo-form">
          <div class="form-grid">
            <semantic-field
              type="text"
              name="username"
              label="Username"
              required
              hint="Choose a unique username"
              data-flow="registration"
              data-step="1"
            ></semantic-field>
            
            <semantic-field
              type="email"
              name="email"
              label="Email Address"
              required
              hint="We'll never share your email"
              data-flow="registration"
              data-step="2"
            ></semantic-field>
            
            <semantic-field
              type="password"
              name="password"
              label="Password"
              required
              minlength="8"
              hint="Minimum 8 characters"
              data-flow="registration"
              data-step="3"
            ></semantic-field>
            
            <semantic-field
              type="tel"
              name="phone"
              label="Phone Number"
              pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
              hint="Format: 123-456-7890"
              data-flow="registration"
              data-step="4"
            ></semantic-field>
            
            <semantic-field
              type="date"
              name="birthdate"
              label="Birth Date"
              max="2010-12-31"
              data-flow="registration"
              data-step="5"
            ></semantic-field>
            
            <semantic-field
              type="textarea"
              name="bio"
              label="Bio"
              maxlength="500"
              hint="Tell us about yourself"
              data-flow="registration"
              data-step="6"
            ></semantic-field>
          </div>
          
          <div class="actions">
            <button type="submit" class="btn">Submit</button>
            <button type="button" class="btn btn-secondary" id="validate-btn">Validate All</button>
            <button type="button" class="btn btn-secondary" id="reset-btn">Reset</button>
          </div>
        </form>
        
        <div id="form-output" class="output" style="display: none;"></div>
      </section>
      
      <!-- Discovery Section -->
      <section class="section">
        <h2>üîç Component Discovery</h2>
        
        <div class="demo-info">
          <strong>Live Discovery:</strong> Automatically finds and displays registered semantic components
        </div>
        
        <semantic-discovery
          type="input"
          tags="registration"
          display-mode="list"
          auto-refresh="5000"
        ></semantic-discovery>
      </section>
      
      <!-- Custom Query Discovery -->
      <section class="section">
        <h2>üéØ Custom Query Discovery</h2>
        
        <div class="demo-info">
          <strong>Advanced Query:</strong> Find components by custom criteria
        </div>
        
        <semantic-discovery
          query='{"flow": "registration", "step": {"$gte": 3}}'
          display-mode="grid"
        ></semantic-discovery>
      </section>
      
    </semantic-provider>
  </div>
  
  <!-- Load the web components -->
  <script type="module">
    // Import from local build (for development)
    import '../dist/semantic-components.esm.js';
    
    // Or use CDN version (for production)
    // <script src="https://unpkg.com/@semantic-protocol/web-components/dist/semantic-components.auto.js"></script>
    
    // Wait for components to be ready
    customElements.whenDefined('semantic-provider').then(() => {
      console.log('‚úÖ Semantic Web Components loaded');
      
      // Get references
      const form = document.getElementById('demo-form');
      const output = document.getElementById('form-output');
      const validateBtn = document.getElementById('validate-btn');
      const resetBtn = document.getElementById('reset-btn');
      
      // Form submission
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        
        // Get all semantic fields
        const fields = form.querySelectorAll('semantic-field');
        const data = {};
        let isValid = true;
        
        fields.forEach(field => {
          const name = field.getAttribute('name');
          const value = field.value;
          const valid = field.valid;
          
          data[name] = value;
          if (!valid) isValid = false;
        });
        
        // Show output
        output.style.display = 'block';
        if (isValid) {
          output.innerHTML = `
            <strong>‚úÖ Form submitted successfully!</strong><br>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          `;
        } else {
          output.innerHTML = `
            <strong>‚ùå Please fix validation errors</strong>
          `;
        }
      });
      
      // Validate all fields
      validateBtn.addEventListener('click', () => {
        const fields = form.querySelectorAll('semantic-field');
        let allValid = true;
        
        fields.forEach(field => {
          const valid = field.validate();
          if (!valid) allValid = false;
        });
        
        output.style.display = 'block';
        output.innerHTML = allValid 
          ? '<strong>‚úÖ All fields are valid!</strong>'
          : '<strong>‚ùå Some fields have validation errors</strong>';
      });
      
      // Reset form
      resetBtn.addEventListener('click', () => {
        const fields = form.querySelectorAll('semantic-field');
        fields.forEach(field => field.reset());
        output.style.display = 'none';
      });
      
      // Listen for semantic events
      document.addEventListener('semantic-registered', (e) => {
        console.log('Component registered:', e.detail);
      });
      
      document.addEventListener('semantic-discovery-complete', (e) => {
        console.log('Discovery complete:', e.detail);
      });
      
      document.addEventListener('semantic-validate', (e) => {
        console.log('Validation:', e.detail);
      });
    });
  </script>
</body>
</html>